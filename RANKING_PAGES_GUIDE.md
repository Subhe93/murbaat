# دليل استخدام نظام صفحات التصنيف (Ranking Pages)

## 📋 نظرة عامة

نظام صفحات التصنيف هو ميزة قوية لإنشاء صفحات ديناميكية محسّنة لمحركات البحث (SEO) تعرض أفضل الشركات حسب معايير مختلفة.

## 🚀 البدء السريع

### 1. تطبيق التغييرات على قاعدة البيانات

بعد تشغيل migration الخاص بـ Prisma، قم بتوليد Prisma Client:

```bash
npx prisma generate
```

### 2. الوصول إلى لوحة الإدارة

انتقل إلى:
```
http://localhost:3000/admin/ranking-pages
```

أو استخدم **السايد بار** في لوحة الإدارة:
- ستجد قسم "صفحات التصنيف" 📈 بين المراجعات والجوائز
- يحتوي على 3 خيارات:
  - 👁️ جميع الصفحات
  - ➕ إضافة صفحة
  - ⚡ توليد تلقائي

## 📍 المسارات الرئيسية

### الواجهة الأمامية:
- **عرض صفحة تصنيف**: `/ranking/[slug]`
  - مثال: `/ranking/best-10-restaurants-damascus-syria`

### لوحة الإدارة:
- **قائمة الصفحات**: `/admin/ranking-pages`
- **إضافة صفحة جديدة**: `/admin/ranking-pages/new`
- **تعديل صفحة**: `/admin/ranking-pages/[id]/edit`
- **توليد تلقائي**: `/admin/ranking-pages/generate`

## ⚡ التوليد التلقائي للصفحات

### كيفية استخدام التوليد التلقائي:

1. انتقل إلى `/admin/ranking-pages/generate`
2. اختر المعايير:
   - الدول (أو اترك فارغاً لجميع الدول)
   - الفئات (أو اترك فارغاً لجميع الفئات)
   - حدد الحد الأدنى لعدد الشركات (افتراضي: 5)
3. اختر الخيارات المتقدمة:
   - ✅ تضمين الفئات الفرعية
   - ✅ تضمين المناطق الفرعية
   - ✅ تخطي الصفحات الموجودة
4. اضغط "بدء التوليد"

### أمثلة على الصفحات المولدة:

#### دولة + فئة
- "أفضل 10 مطاعم في سوريا"
- Slug: `best-restaurants-syria`

#### دولة + مدينة + فئة
- "أفضل 10 مطاعم في دمشق، سوريا"
- Slug: `best-restaurants-damascus-syria`

#### دولة + مدينة + فئة + فئة فرعية
- "أفضل 10 مطاعم برغر في حلب، سوريا"
- Slug: `best-burgers-aleppo-syria`

#### دولة + مدينة + منطقة فرعية + فئة
- "أفضل 10 مراكز صرافة في المزة، دمشق"
- Slug: `best-money-exchange-al-mazzeh-damascus`

## 🎨 الميزات الرئيسية

### 1. صفحات محسّنة لمحركات البحث (SEO)
- ✅ Meta Tags مخصصة (Title, Description, Keywords)
- ✅ Structured Data (JSON-LD)
- ✅ Open Graph Tags
- ✅ Canonical URLs
- ✅ Breadcrumbs

### 2. الفلترة الديناميكية
- حسب الدولة
- حسب المدينة
- حسب المنطقة الفرعية
- حسب الفئة
- حسب الفئة الفرعية

### 3. التحكم الكامل
- إضافة صفحات يدوياً
- تعديل الصفحات المولدة تلقائياً
- إضافة/استبعاد شركات معينة
- تحديد عدد الشركات المعروضة
- اختيار طريقة الترتيب (تقييم، مراجعات، الأحدث، الاسم)

### 4. الإحصائيات
- عدد المشاهدات لكل صفحة
- عدد النقرات
- تقارير شاملة في لوحة الإدارة

## 📝 إنشاء صفحة يدوياً

### الخطوات:

1. انتقل إلى `/admin/ranking-pages/new`
2. املأ المعلومات الأساسية:
   - **العنوان**: مثل "أفضل 10 مطاعم في دمشق"
   - **Slug**: سيتم توليده تلقائياً، أو أدخله يدوياً
   - **الوصف**: وصف قصير للصفحة
   - **المحتوى**: محتوى HTML إضافي (اختياري)

3. أضف معلومات SEO:
   - Meta Title (يستخدم العنوان إذا كان فارغاً)
   - Meta Description (يستخدم الوصف إذا كان فارغاً)
   - الكلمات المفتاحية (مفصولة بفواصل)

4. حدد الفلاتر:
   - اختر الدولة (اختياري)
   - اختر المدينة (اختياري)
   - اختر المنطقة الفرعية (اختياري)
   - اختر الفئة (اختياري)
   - اختر الفئة الفرعية (اختياري)

5. اضبط إعدادات العرض:
   - عدد الشركات المعروضة (افتراضي: 10)
   - الترتيب حسب (تقييم، مراجعات، الأحدث، الاسم)
   - ✅ نشطة (لتفعيل الصفحة)

6. احفظ الصفحة

## 🔧 API Endpoints

### للمطورين:

```typescript
// الحصول على جميع الصفحات
GET /api/admin/ranking-pages

// إنشاء صفحة جديدة
POST /api/admin/ranking-pages

// الحصول على صفحة محددة
GET /api/admin/ranking-pages/[id]

// تحديث صفحة
PUT /api/admin/ranking-pages/[id]

// حذف صفحة
DELETE /api/admin/ranking-pages/[id]

// توليد صفحات تلقائياً
POST /api/admin/ranking-pages/generate

// حذف متعدد
POST /api/admin/ranking-pages/bulk-delete
```

## 🎯 أفضل الممارسات

### 1. SEO
- استخدم عناوين وصفية وجذابة
- اكتب وصفاً فريداً لكل صفحة
- استخدم الكلمات المفتاحية بشكل طبيعي
- تأكد من أن Slug واضح وسهل القراءة

### 2. المحتوى
- أضف محتوى إضافي فريد لكل صفحة
- تجنب المحتوى المكرر
- استخدم HTML لتنسيق المحتوى

### 3. الأداء
- لا تولّد صفحات للتركيبات التي تحتوي على شركات قليلة
- استخدم "تخطي الصفحات الموجودة" لتجنب التكرار
- راجع الصفحات بشكل دوري وحذف غير المستخدمة

## 📊 التقارير والإحصائيات

في صفحة القائمة الرئيسية، ستجد:
- إجمالي الصفحات
- الصفحات النشطة/غير النشطة
- الصفحات التلقائية/اليدوية
- إجمالي المشاهدات
- إجمالي النقرات

## 🔍 البحث والفلترة

في لوحة الإدارة، يمكنك:
- البحث بالعنوان أو Slug
- الفلترة حسب الحالة (نشطة/غير نشطة)
- الفلترة حسب النوع (تلقائية/يدوية)
- الترتيب حسب التاريخ أو المشاهدات

## 🛠️ الصيانة

### إعادة توليد الصفحات:
إذا أضفت دول أو مدن أو فئات جديدة:
1. انتقل إلى `/admin/ranking-pages/generate`
2. اختر "تخطي الصفحات الموجودة"
3. ولّد الصفحات الجديدة فقط

### تحديث الصفحات القديمة:
- الصفحات القديمة محفوظة للحفاظ على الأرشفة
- يمكنك تعديلها أو حذفها يدوياً
- لا تحذف صفحات ذات مشاهدات عالية

## 🎉 نصائح إضافية

1. **ابدأ صغيراً**: جرّب التوليد لدولة واحدة أولاً
2. **راقب الأداء**: تابع الإحصائيات بانتظام
3. **حسّن SEO**: عدّل Meta Tags للصفحات الأكثر زيارة
4. **أضف محتوى**: الصفحات ذات المحتوى الفريد تحصل على ترتيب أفضل
5. **تفاعل مع البيانات**: استخدم التقارير لتحسين الاستراتيجية

---

## 🆘 الدعم

إذا واجهت أي مشكلة:
1. تحقق من console المتصفح للأخطاء
2. تأكد من تشغيل الـ migration
3. تحقق من أن جميع البيانات المرجعية موجودة (دول، مدن، فئات)

---

**تم بناء هذا النظام بحب ❤️ لتحسين الـ SEO وزيادة الظهور في محركات البحث!**

