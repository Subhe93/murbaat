# دليل إعداد لوحة تحكم المدير 🛠️

## 📋 الملفات المُنشأة

### 🔐 نظام المصادقة
- `lib/auth.ts` - إعدادات NextAuth
- `app/api/auth/[...nextauth]/route.ts` - API للمصادقة  
- `app/auth/signin/page.tsx` - صفحة تسجيل الدخول
- `types/next-auth.d.ts` - تعريفات TypeScript للمصادقة
- `components/providers/session-provider.tsx` - مزود الجلسة

### 🏢 لوحة تحكم المدير
- `app/admin/page.tsx` - الصفحة الرئيسية للادمن
- `app/admin/layout.tsx` - تخطيط لوحة تحكم المدير
- `components/admin/admin-dashboard.tsx` - واجهة لوحة التحكم الرئيسية
- `components/admin/admin-sidebar.tsx` - الشريط الجانبي
- `components/admin/admin-header.tsx` - رأس الصفحة

### 📊 صفحات الإدارة
- `app/admin/companies/page.tsx` - إدارة الشركات
- `app/admin/reviews/page.tsx` - إدارة المراجعات  
- `app/admin/users/page.tsx` - إدارة المستخدمين
- `app/admin/settings/page.tsx` - إعدادات النظام

### 🔌 API Endpoints
- `app/api/admin/stats/route.ts` - إحصائيات لوحة التحكم
- `app/api/admin/companies/route.ts` - إدارة الشركات
- `app/api/admin/companies/[id]/route.ts` - تفاصيل الشركة
- `app/api/admin/reviews/route.ts` - إدارة المراجعات
- `app/api/admin/reviews/[id]/approve/route.ts` - الموافقة على المراجعات
- `app/api/admin/users/route.ts` - إدارة المستخدمين

## 🚀 خطوات التشغيل

### 1. تثبيت التبعيات
```bash
yarn add next-auth bcryptjs nodemailer @types/bcryptjs @types/nodemailer
```

### 2. إعداد قاعدة البيانات
```bash
yarn db:setup
```

### 3. تشغيل التطبيق
```bash
yarn dev
```

## 🔑 بيانات تسجيل الدخول التجريبية

**مدير النظام:**
- البريد الإلكتروني: `admin@morabbat.com`
- كلمة المرور: `admin123`

## 📱 الصفحات والروابط

### لوحة تحكم المدير
- الرئيسية: `/admin`
- إدارة الشركات: `/admin/companies`
- إدارة المراجعات: `/admin/reviews`  
- إدارة المستخدمين: `/admin/users`
- إعدادات النظام: `/admin/settings`

### صفحات المصادقة
- تسجيل الدخول: `/auth/signin`

## ✨ المميزات المُطبقة

### 🛡️ الأمان والحماية
- ✅ تشفير كلمات المرور باستخدام bcryptjs
- ✅ حماية المسارات باستخدام middleware
- ✅ نظام أدوار المستخدمين (SUPER_ADMIN, ADMIN, COMPANY_OWNER, USER)
- ✅ جلسات آمنة مع NextAuth

### 📊 لوحة التحكم
- ✅ إحصائيات شاملة في الوقت الفعلي
- ✅ رسوم بيانية لتوزيع الشركات
- ✅ أحدث النشاطات والمراجعات
- ✅ طلبات الشركات المعلقة

### 🏢 إدارة الشركات
- ✅ عرض قائمة الشركات مع البحث والفلترة
- ✅ تفاصيل كاملة لكل شركة
- ✅ إدارة حالة الشركات (نشطة/معلقة)
- ✅ عدد المراجعات والتقييمات

### 👥 إدارة المستخدمين  
- ✅ عرض جميع المستخدمين
- ✅ فلترة حسب الدور (مدير، مالك شركة، مستخدم)
- ✅ حالة التوثيق والنشاط
- ✅ إحصائيات المستخدم (مراجعات، شركات)

### 💬 إدارة المراجعات
- ✅ عرض جميع المراجعات
- ✅ فلترة حسب الحالة (معلقة، موافق عليها، مرفوضة)
- ✅ الموافقة السريعة على المراجعات
- ✅ عرض الصور المرفقة

### ⚙️ إعدادات النظام
- ✅ إعدادات الموقع العامة
- ✅ حدود رفع الملفات
- ✅ إعدادات المراجعات والموافقة
- ✅ إعدادات التحقق من البريد الإلكتروني

## 🎯 الخطوات التالية

1. **تثبيت التبعيات المطلوبة** (إذا لم تُثبت بعد)
2. **تشغيل إعداد قاعدة البيانات**
3. **تشغيل التطبيق واختبار تسجيل الدخول**
4. **الوصول للوحة تحكم المدير**

## 🔗 روابط سريعة

- [تسجيل الدخول](http://localhost:3000/auth/signin)
- [لوحة تحكم المدير](http://localhost:3000/admin)
- [الصفحة الرئيسية](http://localhost:3000)

---

**تم إنشاء نظام إدارة متكامل مع أمان عالي وواجهة سهلة الاستخدام! 🎉**
